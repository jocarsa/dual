<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLAN DE FORMACIÓN</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #000;
            padding: 0px 8px;
            vertical-align: top;
           
        }
        blockquote {
            margin: 0;
            padding: 0;
            display: inline-block;
        }
        .text-center {
            text-align: center;
        }
        sup {
            vertical-align: super;
            font-size: smaller;
        }
        input{
        	border:none;
        	border-bottom:1px solid lightgrey;
        }
        .secundario{
        	display:none;
        }
        .resultado{
        	display:none;
        }
    </style>
</head>
<body>
    <table>
        <colgroup>
            <col style="width: 12%">
            <col style="width: 3%">
            <col style="width: 4%">
            <col style="width: 11%">
            <col style="width: 2%">
            <col style="width: 7%">
            <col style="width: 3%">
            <col style="width: 3%">
            <col style="width: 0%">
            <col style="width: 3%">
            <col style="width: 12%">
            <col style="width: 3%">
            <col style="width: 3%">
            <col style="width: 2%">
            <col style="width: 7%">
            <col style="width: 1%">
            <col style="width: 15%">
        </colgroup>
        <thead>
            <tr>
                <th colspan="2"></th>
                <th colspan="13">
                    <blockquote>
                        <p><strong>PLAN DE FORMACIÓN</strong></p>
                        <p>Resultados de aprendizaje en periodos de formación en empresa u organismo equiparado Régimen(general/intensivo):</p>
                        <p>Fecha: / Curso escolar</p>
                        <p><strong>CURSO:</strong></p>
                    </blockquote> <input type="text">
                </th>
                <th colspan="2">
                    <blockquote>
                        <p><strong>Dirección General de Formación Profesional</strong></p>
                    </blockquote> <input type="text">
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="3">
                    <blockquote>
                        <p>Ciclo formativo/Curso de especialización</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="10"></td>
                <td colspan="4">
                    <blockquote>
                        <p>Grupo:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2" rowspan="2">
                    <blockquote>
                        <p>Alumno/a</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>Nombre y apellidos:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>DNI:</p>
                    </blockquote> <input type="text">
                </td>
                <td>
                    <blockquote>
                        <p>NUSS:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>Email:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="2">
                    <blockquote>
                        <p>Teléfono:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <blockquote>
                        <p>Fecha de nacimiento: / /</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="5">
                    <blockquote>
                        <p>Dispone del nivel básico de PRL <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>Dispone de otra certificación adicional de PRL <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>Especificar:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <blockquote>
                        <p>Centro educativo</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="6" rowspan="2"></td>
                <td colspan="5">
                    <blockquote>
                        <p>Email:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>Código:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <blockquote>
                        <p>Tutor/a del centro educativo</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="5">
                    <blockquote>
                        <p>Email:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>Teléfono:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <blockquote>
                        <p>Empresa<strong><sup>1</sup></strong></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="6">
                    <blockquote>
                        <p>Denominación:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="5">
                    <blockquote>
                        <p>Email:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>CIF:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <blockquote>
                        <p>Tutor/a de empresa</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="6">
                    <blockquote>
                        <p>Nombre y apellidos:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="5">
                    <blockquote>
                        <p>Email:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>Teléfono:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <blockquote>
                        <p>Empresa</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="6">
                    <blockquote>
                        <p>Denominación:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="5">
                    <blockquote>
                        <p>Email:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>CIF:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <blockquote>
                        <p>Tutor/a de empresa</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="6">
                    <blockquote>
                        <p>Nombre y apellidos:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="5">
                    <blockquote>
                        <p>Email:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4">
                    <blockquote>
                        <p>Teléfono:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td rowspan="2" class="text-center">
                    <blockquote>
                        <p>Requiere medidas o adaptaciones extraordinarias por discapacidad</p>
                    </blockquote> <input type="text">
                </td>
                <td class="text-center">
                    <blockquote>
                        <p>SÍ <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="2" rowspan="2">
                    <blockquote>
                        <p>Especificar</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="3" rowspan="2">
                    <blockquote>
                        <p>Requiere autorizaciones extraordinarias</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="2">
                    <blockquote>
                        <p>SÍ <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4" rowspan="2">
                    <blockquote>
                        <p>Especificar:</p>
                        <p>- Para realizar actividades de formación fuera del entorno socioeconómico del centro educativo.</p>
                    </blockquote> <input type="text">
                    <p>-</p>
                </td>
                <td colspan="4" rowspan="2">
                    <blockquote>
                        <p>Observaciones:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td class="text-center">
                    <blockquote>
                        <p>NO <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="2">
                    <blockquote>
                        <p>NO <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <blockquote>
                        <p>Intervalo de formación</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="3" class="text-center">
                    <blockquote>
                        <p>Diario <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="5" class="text-center">
                    <blockquote>
                        <p>Semanal <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="2">
                    <blockquote>
                        <p>Mensual <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="4" class="text-center">
                    <blockquote>
                        <p>Otros <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
                <td>
                    <blockquote>
                        <p>Varias empresas <input type="checkbox"></p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="2" rowspan="2">
                    <blockquote>
                        <p>PERIODOS DE FORMACIÓN EN EMPRESA</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="5">
                    <blockquote>
                        <p>1<sup>er</sup> Periodo. Calendario y horario</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="7">
                    <blockquote>
                        <p>Horas:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="3">
                    <blockquote>
                        <p>Empresa/s:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td colspan="5" rowspan="2">
                    <blockquote>
                        <p>2º Periodo. Calendario y horario</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="7" rowspan="2">
                    <blockquote>
                        <p>Horas:</p>
                    </blockquote> <input type="text">
                </td>
                <td colspan="3" rowspan="2">
                    <blockquote>
                        <p>Empresa/s:</p>
                    </blockquote> <input type="text">
                </td>
            </tr>
            <tr>
                <td>
                    <blockquote>
                        <p>TOTAL, HORAS</p>
                    </blockquote> <input type="text">
                </td>
                <td></td>
            </tr>
        </tbody>
    </table>

    <p>1. Añadir o eliminar las filas necesarias en función del número de empresas colaboradoras.</p>

    
        <?php
        $db = new PDO("sqlite:database.sqlite");
        $query = "SELECT * FROM modulos WHERE ciclo = 'Ciclo Formativo de Grado Superior en Desarrollo de Aplicaciones Multiplataforma' AND curso = '1'";
    $result = $db->query($query);
    while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
        echo '
        <table>
        <colgroup>
            <col style="width: 15%">
            <col style="width: 3%">
            <col style="width: 30%">
            <col style="width: 10%">
            <col style="width: 10%">
            <col style="width: 15%">
        </colgroup>
        <thead>
            <tr>
                <th><strong>Módulo profesional<sup>2</sup></strong></th>
                <th><strong>Código</strong></th>
                <th><strong>Resultados de aprendizaje</strong></th>
                <th><strong>Desarrollado en el centro (marcar con x)</strong></th>
                <th><strong>Desarrollado en la empresa (marcar con x)</strong></th>
                <th><strong>Empresa</strong></th>
            </tr>
        </thead>
        <tbody>
        	';
        	$query2 = "SELECT * FROM resultados WHERE modulo = ".$row['Identificador']."";
        	$result2 = $db->query($query2);
        	$contador = 0;
        	while ($row2 = $result2->fetch(PDO::FETCH_ASSOC)) {
		     	echo '
		         <tr ';
		         if($contador != 0){echo 'class="secundario"';}
		         echo'>
		             ';
		             if($contador == 0){
		             echo '<td rowspan="20">';
		             	echo '
		                 <blockquote>
		                 '.$row['modulo'].'
		                     <p>Se imparte de forma completa en el centro <input type="checkbox"></p>
		                     <p>Se imparte en colaboración con empresas <input type="checkbox" class="imparteempresa"> Número de horas a desarrollar en la empresa: 0</p>
		                     <p>Indicar el reparto de resultados de aprendizaje (RA)</p>
		                 </blockquote> <input type="text">';
		                 echo '</td>';
		                  echo '
		             <td rowspan="20">
		              '.$row['Identificador'].'
		             </td>';
		                 }else{
		                 	
		                 }
		             
		            
		             echo '
		             <td>
		             <p class="resultado">'.$row2['resultado'].'</p>
		             <ul>
		             ';
		             $query3 = "SELECT * FROM actividades WHERE resultado = '".$row2['resultado']."'";
        				$result3 = $db->query($query3);
        				while ($row3 = $result3->fetch(PDO::FETCH_ASSOC)) {
        					echo '<li><input type="checkbox">'.$row3['criterio'].'</li>';
        				}
		             echo '
		             </ul>
		             </td>
		             <td><input type="checkbox">
		             </td>
		             <td><input type="checkbox" class="empresa">
		             </td>
		             <td>
		             </td>
		             
		         </tr>';
		         $contador++;
           }
            echo '
             </tbody>
    </table>
            ';
            }
            ?>
       <style>
       	ul{display:none;}
       </style>
<script>
	let empresas = document.querySelectorAll(".empresa")
	empresas.forEach(function(empresa){
		empresa.onchange = function(){
			console.log(this.checked)
			if(this.checked){
				this.parentElement.previousElementSibling.previousElementSibling.querySelector('ul').style.display = "block";
			}else{
				this.parentElement.previousElementSibling.previousElementSibling.querySelector('ul').style.display = "none";
			}
		}
	})
	let imparteempresas = document.querySelectorAll(".imparteempresa")
	imparteempresas.forEach(function(imparteempresa){
		imparteempresa.onchange = function(){
			console.log(this.checked)
			if(this.checked){
				let elementosmostrar = this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelectorAll('.secundario')
				
				elementosmostrar.forEach(function(elementomostrar){
				console.log("ok")
					elementomostrar.style.display = "table-row"
				})
				let resultadosmostrar = this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelectorAll('.resultado')
				console.log(resultadosmostrar)
				resultadosmostrar.forEach(function(resultadomostrar){
					resultadomostrar.style.display = "block"
				})
			}else{
				let elementosmostrar = this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelectorAll('.secundario')
				elementosmostrar.forEach(function(elementomostrar){
					elementomostrar.style.display = "none"
				})
				let resultadosmostrar = this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelectorAll('.resultado')
				resultadosmostrar.forEach(function(resultadomostrar){
					resultadomostrar.style.display = "none"
				})
			}
		}
	})
</script>
    

    <table>
        <colgroup>
            <col style="width: 20%">
            <col style="width: 20%">
            <col style="width: 60%">
        </colgroup>
        <thead>
            <tr>
                <th colspan="3"><strong>Formaciones específicas y no vinculadas al currículo del Ciclo formativo/Curso de especialización, propuesta por el centro educativo, de carácter voluntario para el alumnado y no evaluable.<sup>3</sup></strong></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="3">Descripción:</td>
            </tr>
            <tr>
                <td colspan="3">Calendario y horario:</td>
            </tr>
            <tr>
                <td>Resultado previsto del aprendizaje</td>
                <td>Contenidos a desarrollar</td>
                <td>Actividades formativas</td>
            </tr>
            <tr>
                <td colspan="3"></td>
            </tr>
        </tbody>
    </table>

    <table>
        <colgroup>
            <col style="width: 33%">
            <col style="width: 33%">
            <col style="width: 34%">
        </colgroup>
        <tbody>
            <tr>
                <td>El/la Tutor/a Dual del centro educativo</td>
                <td>El/la Tutor/a Dual de la empresa</td>
                <td>El/la Alumno/a</td>
            </tr>
            <tr>
                <td>Fdo.:</td>
                <td>Fdo.:</td>
                <td>Fdo.:</td>
            </tr>
        </tbody>
    </table>

    <p>3. Incluir solo en caso de incorporar formación de carácter complementario no curricular, teniendo en cuenta el máximo de horas establecido para cada tipo de régimen (10% para régimen general y el 40% para el régimen intensivo).</p>
</body>
</html>
